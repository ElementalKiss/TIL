# 10 멀티프로세스 기반의 서버구현

## 10-1 프로세스의 이해와 활용

### 두 가지 유형의 서버

* 유형1: 첫 번째 연결요청자는 대기 0초, 50번째 연결요청자는 50초. 그러나 일단 연결되면 1초 안에 서비스 완료.
* 유형2: 모든 연결요청자가 접속대기시간 1초 이하, 서비스 제공받는데 걸리는 시간은 평균 2~3초.

### 다중접속 서버의 구현방법들

* 멀티프로세스 기반 서버: 다수의 프로세스를 생성하는 방식으로 서비스 제공(Linux 한정)
* 멀티플렉싱 기반 서버: 입출력 대상을 묶어서 관리하는 방식으로 서비스 제공
* 멀티쓰레딩 기반 서버: 클라이언트의 수만큼 쓰레드를 생성하는 방식으로 서비스 제공

### 프로세스(Process)의 이해

* 정의: 메모리 공간을 차지한 상태에서 실행중인 프로그램
* 벽돌깨기 프로그램을 다운 받으면 그것은 프로그램, 실행해서 메모리에 올라가면 프로세스.

### 프로세스 ID

* 2 이상의 정수 형태.(1은 운영체제가 시작하자마자 운영체제를 돕는 프로세스에 부여)
* ps au 명령을 통해 확인 가능.

### fork 함수호출을 통한 프로세스의 생성

```cpp
#include<unistd.h>

pid_t fork(void);
// 성공 시 프로세스 ID, 실패 시 -1
```

* fork 함수는 호출한 프로세스의 복사본을 생성.
* 부모 프로세스(원본 프로세스)와 자식 프로세스(복사본)는 모두 fork 함수 이후 문장을 실행.
* 부모 프로세스: fork 함수의 반환 값은 자식 프로세스의 ID
* 자식 프로세스: fork 함수의 반환 값은 0

## 10-2 프로세스 & 좀비(Zombie) 프로세스

### 좀비 프로세스

* 할 일을 다 하고 사라지지 않는 프로세스

### 좀비 프로세스의 생성 이유

* 자식 프로세스 종료 원인1: 인자를 전달하며 exit를 호출하는 경우
* 자식 프로세스 종료 원인2: main 함수에서 return문을 실행하면서 값을 리턴하는 경우
* 위 return 값은 운영체제에게 전달 되는데 이를 다시 자식 프로세스를 생성한 부모 프로세스에게 보내는데 이것이 전달되는 상황에 놓인 프로세스가 좀비 프로세스.